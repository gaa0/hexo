---
title: 객체지향의 사실과 오해 5장. 책임과 메시지
toc: true
thumbnail: images/thumbnail/1.jpeg
tags: [OOP, book, 객체지향]
date: 2022-04-10 22:07:49
categories: 독서
---
## 자율적인 책임
### 설계의 품질을 좌우하는 책임
협력에 참여하는 객체가 얼마나 자율적인지가 전체 애플리케이션의 품질을 결정한다.
### 자신의 의지에 따라 증언할 수 있는 자유
객체지향 세계는 자율적인 객체들의 공동체
### 너무 추상적인 책임
어떤 책임이 자율적인지를 판단하는 기준은 문맥에 따라 다르다.
### '어떻게'가 아니라 '무엇'을
어떻게 증언할 것인지가 책임의 수준에서 어느 정도 결정돼 있으면 모자 장수가 선택할 수 잇는 부분은 크게 제한될 수밖에 없다.
### 책임을 자극하는 메시지
메시지는 객체로 하여금 자신의 책임, 즉 행동을 수행하게 만드는 유일한 방법
## 메시지와 메서드
### 메시지
왕이 모자 장수에게 전송하는 메시지를 가리키는 '증언하라'라는 부분을 **메시지 이름**(message name)이라고 한다. 메시지를 전송할 때 추가적인 정보가 필요한 경우 메시지의 **인자**(argument)를 통해 추가 정보를 제공할 수 있다.
### 메서드
**메서드**: 메시지를 처리하기 위해 내부적으로 선택하는 방법
### 다형성
다형성
- 서로 다른 유형의 객체가 동일한 메시지에 대해 서로 다르게 반응하는 것
- 동일한 역할을 수행할 수 있는 객체들 사이의 **대체 가능성**

### 유연하고 확장 가능하고 재사용성이 높은 협력의 의미
- 협력이 유연해진다.
- 협력이 수행되는 방식을 확장할 수 있다.
- 협력이 수행되는 방식을 재사용할 수 있다.

### 송신자와 수신자를 약하게 연결하는 메시지
메시지를 기반으로 한 두 객체 사이의 낮은 결합도가 설계를 유연하고 확장 가능하며 재사용 가능하게 만드는 비결
## 메시지를 따라라
### 객체지향의 핵심, 메시지
객체가 메시지를 선택하는 것이 아니라 메시지가 객체를 선택하게 해야 한다.
### 책임-주도 설계 다시 살펴보기
- 객체가 책임을 완수하기 위해 다른 객체의 도움이 필요하다고 판단되면 도움을 요청하기 위해 어떤 **메시지가 필요한지 결정**
- 메시지를 수신하기에 적합한 **객체를 선택**

**메시지가 수신자의 책임을 결정**
### What/Who 사이클
**What/Who 사이클**: 어떤 행위가 필요한지를 먼저 결정한 후에 이 행위를 수행할 객체를 결정하는 과정
### 묻지 말고 시켜라
샌디 메츠(Sandi Metz)는 **묻지 말고 시켜라(Tell, Don't Ask)** 스타일이란 "메시지가 '어떻게' 해야 하는지를 지시하지 말고 '무엇'을 해야 하는지를 요청"하는 것이라고 설명한다.
### 메시지를 믿어라
메시지를 믿어라. 그러면 자율적인 책임은 저절로 따라올 것이다.
## 객체 인터페이스
### 인터페이스
- 객체의 인터페이스만 알면 객체의 내부 구조나 작동 방식을 몰라도 객체와 상호작용할 수 있다.
- 인터페이스만 유지된다면 객체의 내부 구조나 작동 방식을 변경하거나 다른 객체로 대체한다고 하더라도 인터페이스 사용자에게 영향을 미치지 않는다.

### 메시지가 인터페이스를 결정한다
객체의 인터페이스는 객체가 수신할 수 있는 메시지의 목록으로 구성된다.
### 공용 인터페이스
**공용 인터페이스**: 외부에 공개된 인터페이스
### 책임, 메시지, 그리고 인터페이스
- 협력에 참여하는 객체의 책임이 자율적이어야 한다.
- 한 객체가 다른 객체에게 요청을 전송할 때 사용하는 메커니즘인 메시지
- 객체가 책임을 수행하기 위해 외부로부터 메시지를 받기 위한 통로인 인터페이스

## 인터페이스와 구현의 분리
### 객체 관점에서 생각하는 방법
- 좀 더 추상적인 인터페이스
- 최소 인터페이스
- 인터페이스와 구현 간에 차이가 있다는 점을 인식

### 구현
**구현(implementation)**: 내부 구조와 작동 방식
### 인터페이스와 구현의 분리 원칙
**인터페이스와 구현의 분리(separation of interface and implementation) 원칙**: 객체를 설계할 때 객체 외부에 노출되는 인터페이스와 객체의 내부에 숨겨지는 구현을 명확하게 분리해서 고려해야 한다.
### 캡슐화
#### 상태와 행위의 캡슐화
**데이터 캡슐화(data encapsulation)**: 객체는 스스로 자신의 상태를 관리하며 상태를 변경하고 외부에 응답할 수 있는 행동을 내부에 함께 보관한다.
#### 사적인 비밀의 캡슐화
외부에 제공해야 할 필요가 있는 메시지만을 객체의 공용 인터페이스에 포함시키고 개인적인 비밀은 공용 인터페이스의 뒤에 감춤으로써 외부의 불필요한 공격과 간섭으로부터 내부 상태를 격리할 수 있다.
## 책임의 자율성이 협력의 품질을 결정한다
- **자율적인 책임은 협력을 단순하게 만든다.**
- **자율적인 책임은 모자 장수의 외부와 내부를 명확하게 분리한다.**
- **책임이 자율적일 경우 책임을 수행하는 내부적인 방법을 변경하더라도 외부에 영향을 미치지 않는다.**
- **자율적인 책임은 협력의 대상을 다양하게 선택할 수 있는 유연성을 제공한다.**
- **객체가 수행하는 책임들이 자율적일수록 객체의 역할을 이해하기 쉬워진다.**